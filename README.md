# CrossTalkAnalyzer

Программа для анализа и обработки нуклеотидных последовательностей с функцией удаления перекрестных помех.

 ![Главное окно](https://github.com/user-attachments/assets/ccc044e9-1ffe-4004-9439-ad7a0a042f4e)

 [Пример работы](https://github.com/user-attachments/assets/ba498953-f71c-4fd2-8218-8aa12392e74b)

## Описание

CrossTalkAnalyzer — это настольное приложение с графическим интерфейсом для анализа данных секвенирования ДНК. Программа позволяет загружать файлы с сигналами нуклеотидных последовательностей, обрабатывать их для удаления перекрестных помех между каналами (A, C, G, T) и визуализировать результаты.

## Основные возможности

-   **Загрузка файлов**: Поддержка форматов CSV и SRD
-   **Обработка данных**:
    -   Удаление перекрестных помех между каналами
    -   Коррекция базовой линии
    -   Сглаживание сигналов
-   **Визуализация**:
    -   Графики исходных и обработанных сигналов
    -   Сравнительный анализ "до" и "после"

## Установка

-   ### Windows

    -   **Установите .exe файл из _Releases_**

-   ### macOS/Linux

  1. **Клонируйте репозиторий**/**Скачайте соответствующий Source code из _Releases_**:

        ```bash
        git clone <url-репозитория>
        cd cross_talk
        ```

  2. **Создайте виртуальное окружение** (рекомендуется):

        ```bash
        python -m venv venv
    
        # Windows
        venv\Scripts\activate
    
        # macOS/Linux
        source venv/bin/activate
        ```

  3. **Установите зависимости**:

        ```bash
        pip install -r requirements.txt
        ```

  4. **Запустите приложение**:
        ```bash
        python main.py
        ```

## Зависимости

Основные библиотеки, используемые в проекте:

```
pandas>=1.3.0          # Обработка данных
numpy>=1.20.0          # Численные вычисления
scipy>=1.7.0           # Научные вычисления
matplotlib>=3.3.0      # Построение графиков
statsmodels>=0.12.0    # Статистический анализ
peakutils>=1.3.0       # Анализ пиков
lxml>=4.6.0           # Парсинг XML
PySide6>=6.0.0        # Графический интерфейс
pyqtgraph>=0.13.0     # Интерактивная визуализация
pyinstaller>=5.0.0    # Создание исполняемых файлов
```

## Использование приложения

### 1. Запуск

-   Через исполняемый файл: запустите `CrossTalkAnalyzer.exe`
-   Из исходного кода: выполните `python main.py`

### 2. Загрузка данных

1. Нажмите кнопку **"Загрузить файл"** или используйте меню **Файл → Открыть**
2. Выберите файл с данными (форматы: `.csv`, `.srd`)
3. Файл появится в списке слева

### 3. Обработка данных

1. Выберите файл в списке
2. Нажмите **"Обработать"** или используйте меню **Обработка → Запустить**
3. Дождитесь завершения обработки (прогресс отображается внизу окна)

### 4. Просмотр результатов

1. После обработки откроются вкладки с графиками:
    - **Исходные данные**: Сырые сигналы всех каналов
    - **Обработанные данные**: Очищенные от перекрестных помех сигналы
    - **Сравнение**: Наложение исходных и обработанных данных

### 5. Сохранение результатов

Результаты автоматически сохраняются в папку `processed_sequences/` в следующей структуре:

```
processed_sequences/
├── имя_файла_seq/
│   ├── имя_файла.csv           # Исходные данные
│   ├── имя_файла_clean.csv     # Обработанные данные
│   └── имя_файла_iterations.json # Параметры обработки (если есть)
```

## Поддерживаемые форматы файлов

### CSV файлы

Должны содержать колонки для каждого нуклеотида:

-   `A` - сигнал аденина
-   `G` - сигнал гуанина
-   `C` - сигнал цитозина
-   `T` - сигнал тимина

Пример структуры:

```csv
A,G,C,T
100,80,90,70
200,180,190,170
150,120,130,110
```

### SRD файлы

Формат Applied Biosystems для данных секвенирования.

## Параметры обработки

При обработке данных применяются следующие алгоритмы:

-   **Коррекция базовой линии**: Удаление дрейфа сигнала
-   **Сглаживание**: Уменьшение шума в данных
-   **Удаление перекрестных помех**: Коррекция взаимного влияния каналов друг на друга

Алгоритм автоматически определяет оптимальные параметры для каждого файла.

## Использование API

Для программного использования функций обработки см. [API_README.md](API_README.md).

Пример простого использования:

```python
from app.api.sequence import Sequence
from app.api.processor import Processor
import pandas as pd

# Загрузка данных
data = pd.read_csv("my_sequence.csv")

# Создание объекта последовательности
sequence = Sequence(dataframe=data, name="my_sequence")

# Обработка
processor = Processor()
processor.add_sequence(sequence)
results = processor.process_all()
```

## Структура проекта

```
cross_talk/
├── app/                        # Основной код приложения
│   ├── api/                   # API для программного использования
│   ├── core/                  # Ядро приложения
│   ├── ui/                    # Графический интерфейс
│   └── utils/                 # Вспомогательные функции
├── data/                      # Примеры данных
├── TestData/                  # Тестовые файлы
├── processed_sequences/       # Результаты обработки
├── dist/                      # Готовые исполняемые файлы
├── main.py                    # Точка входа в приложение
├── requirements.txt           # Зависимости Python
└── README.md                  # Этот файл
```
